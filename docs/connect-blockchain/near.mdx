---
title: Integrate Web3Auth with the NEAR Protocol
sidebar_label: NEAR
image: "/docs/contents/guides/banners/tezos.png"
displayed_sidebar: docs
keywords: [near, web3auth, authentication, blockchain]
description: "Integrate Web3Auth with the NEAR Protocol | Documentation - Web3Auth"
---

import GetUserInfoSnippet from "@site/src/common/docs/_get-userinfo.mdx";

---

## Installation

```bash npm2yarn
npm install --save near-api-js bn.js
```

## Initializing Provider

---

```js
import { Web3Auth } from "@web3auth/web3auth";
import { OpenloginAdapter } from "@web3auth/openlogin-adapter";

const web3auth = new Web3Auth({
  clientId: "YOUR_WEB3AUTH_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "other", // for all non EVM and SOLANA chains, use "other"
    rpcTarget: "https://rpc.mainnet.near.org",
    displayName: "NEAR",
    blockExplorer: "https://explorer.mainnet.near.org",
  },
});

// "other" is supported through @web3auth/openlogin-adapter package.
const openloginAdapter = new OpenloginAdapter({
  adapterSettings: {
    clientId,
    network: "testnet",
    uxMode: "popup",
  },
});
web3auth.configureAdapter(openloginAdapter);

await web3auth.initModal();

const web3authProvider = web3auth.connect(); // web3auth.provider
```

## Get User Info

---

<GetUserInfoSnippet />

## Get Account, Balance and Key

---

Once a user logs in, the Web3Auth SDK returns a provider. Since Web3Auth doesn't have a native provider for NEAR, we need to directly use the private
key to make the RPC calls.

Using the function, `web3auth.provider.request({method: "private_key"})` from Web3Auth provider, the application can have access to the user's private
key. However, we cannot use this key with NEAR EC Curve specific signing functions, hence, we first derive the NEAR Key using the `getNearKeyPair()`
function.

On the underhood, it uses the `near-api-js/KeyPair.fromString()` function, where we need to pass the `base_encode(privateKey)`, ie. private key is
encoded to base58 to follow the Ed25519 curve. We can use the returned private key pair from this and use on NEAR transactions.

```js
import { connect, KeyPair, keyStores } from "near-api-js";
import { base_encode } from "near-api-js/lib/utils/serialize";
import { SafeEventEmitterProvider } from "@web3auth/base";

/*
  Use code from the above Initializing Provider here
*/

// web3authProvider is web3auth.provider from above
const privateKey = await web3authProvider.request({ method: "private_key" });

// derive the NEAR Key Pair from the private key
const keyPair = KeyPair.fromString(base_encode(privateKey));

// keyPair.getPublicKey is the account address.
const account = keyPair?.getPublicKey().toString().split(":")[1];
```

## Get Balance

---

```js
import { connect, KeyPair, keyStores } from "near-api-js";
import { SafeEventEmitterProvider } from "@web3auth/base";
import { base_encode } from "near-api-js/lib/utils/serialize";

/*
  Use code from the above Initializing Provider here
*/

// web3authProvider is web3auth.provider from above
const privateKey = await web3authProvider.request({ method: "private_key" });
// derive the Tezos Key Pair from the private key
const keyPair = KeyPair.fromString(base_encode(privateKey));
const myKeyStore = new keyStores.InMemoryKeyStore();
await myKeyStore.setKey("testnet", "example-account.testnet", keyPair);
// connections can be made to any network
// refer https://docs.near.org/tools/near-api-js/quick-reference#connect

const connectionConfig = {
  networkId: "testnet",
  keyStore: myKeyStore, // first create a key store
  nodeUrl: "https://rpc.testnet.near.org",
  walletUrl: "https://wallet.testnet.near.org",
  helperUrl: "https://helper.testnet.near.org",
  explorerUrl: "https://explorer.testnet.near.org",
};
const nearConnection = await connect(connectionConfig);
const account = await nearConnection.account("example-account.testnet");
const accountBalance = await account.getAccountBalance();
```
